create table public.badges (
  id      smallint primary key,
  code    text unique,
  title   text,
  icon    text,
  description text
);

create table public.user_badges (
  user_id uuid references auth.users on delete cascade,
  badge_id smallint references badges(id),
  given_at timestamptz default now(),
  primary key(user_id, badge_id)
);

insert into badges(id, code, title, icon, description) values
  (1, 'streak5', '–°—Ç—Ä–∏–∫ 5', 'üî•', '–†–µ—à–∞–π –∑–∞–¥–∞—á–∏ 5 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥'),
  (2, 'speedy', '–°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π', '‚ö°', '–†–µ—à–∞–π –∑–∞–¥–∞—á–∏ –±—ã—Å—Ç—Ä–æ (< 60 —Å–µ–∫)'),
  (3, 'perfectionist', '–ü–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç', 'üéØ', '–†–µ—à–∏ 20 –∑–∞–¥–∞—á –ø–æ–¥—Ä—è–¥ –±–µ–∑ –æ—à–∏–±–æ–∫'),
  (4, 'night_owl', '–°–æ–≤–∞', 'üåô', '–†–µ—à–∞–π –∑–∞–¥–∞—á–∏ –ø–æ–∑–¥–Ω–æ –≤–µ—á–µ—Ä–æ–º (22:00-02:00)'),
  (5, 'early_bird', '–ñ–∞–≤–æ—Ä–æ–Ω–æ–∫', 'üåÖ', '–†–µ—à–∞–π –∑–∞–¥–∞—á–∏ —Ä–∞–Ω–æ —É—Ç—Ä–æ–º (06:00-08:00)'),
  (6, 'weekend_warrior', '–í—ã—Ö–æ–¥–Ω–æ–π –≤–æ–∏–Ω', 'üèÜ', '–ê–∫—Ç–∏–≤–Ω–æ —Ä–µ—à–∞–π –∑–∞–¥–∞—á–∏ –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö'),
  (7, 'topic_master', '–ú–∞—Å—Ç–µ—Ä —Ç–µ–º—ã', 'üéì', '–û—Å–≤–æ–π –æ–¥–Ω—É —Ç–µ–º—É –Ω–∞ 95%'),
  (8, 'hundred_tasks', '–°–æ—Ç–Ω—è', 'üíØ', '–†–µ—à–∏ 100 –∑–∞–¥–∞—á'),
  (9, 'first_correct', '–ü–µ—Ä–≤—ã–π —É—Å–ø–µ—Ö', '‚úÖ', '–ü–µ—Ä–≤–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ—à–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞'),
  (10, 'comeback_kid', '–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ', 'üîÑ', '–í–µ—Ä–Ω–∏—Å—å –∫ —Ä–µ—à–µ–Ω–∏—é –∑–∞–¥–∞—á –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä—ã–≤–∞'),
  (11, 'streak10', '–°—Ç—Ä–∏–∫ 10', 'üî•üî•', '–†–µ—à–∞–π –∑–∞–¥–∞—á–∏ 10 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥'),
  (12, 'streak30', '–°—Ç—Ä–∏–∫ 30', 'üî•üî•üî•', '–†–µ—à–∞–π –∑–∞–¥–∞—á–∏ 30 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥'),
  (13, 'marathon', '–ú–∞—Ä–∞—Ñ–æ–Ω', 'üèÉ', '–†–µ—à–∏ 50 –∑–∞–¥–∞—á –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å'),
  (14, 'accuracy_master', '–ú–∞—Å—Ç–µ—Ä —Ç–æ—á–Ω–æ—Å—Ç–∏', 'üéØ', '–î–æ—Å—Ç–∏–≥–Ω–∏ 95% —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ –≤—Å–µ–º —Ç–µ–º–∞–º'),
  (15, 'explorer', '–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å', 'üó∫Ô∏è', '–ò–∑—É—á–∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–º—ã');
