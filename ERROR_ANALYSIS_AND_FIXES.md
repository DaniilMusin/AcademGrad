# –ê–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ EGE AI Learning Platform

## üìä –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### 1. –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ë—ã–ª–∞ —É–∫–∞–∑–∞–Ω–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤–µ–∫—Ç–æ—Ä–æ–≤ (768 vs 1536)
- **–†–µ—à–µ–Ω–∏–µ**: –í —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø–æ–ª–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ `vector(1536)` –≤ —Ñ–∞–π–ª–µ `supabase/migrations/20240701_init.sql` (—Å—Ç—Ä–æ–∫–∞ 18), —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç OpenAI text-embedding-3-small –º–æ–¥–µ–ª–∏

#### 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞**: –£–ø–æ–º–∏–Ω–∞–ª–∏—Å—å Django –º–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Supabase + Next.js –≤–º–µ—Å—Ç–æ Django, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è AI-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

#### 3. –°–∏—Å—Ç–µ–º–∞ embeddings
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
- **–û–ø–∏—Å–∞–Ω–∏–µ**: 
  - –°–∫—Ä–∏–ø—Ç `scripts/embed_chunks.py` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç embeddings –¥–ª—è –∑–∞–¥–∞—á
  - Edge function `chat-task` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç vector similarity search —á–µ—Ä–µ–∑ `similaritySearch()`
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç pgvector –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 1. CI/CD –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **–§–∞–π–ª**: `.github/workflows/`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö workflow —Ñ–∞–π–ª–æ–≤
- **–¢–µ–∫—É—â–∏–µ —Ñ–∞–π–ª—ã**: ci.yml, cron.yml, deploy-edge.yml, embed.yml, preview.yml

#### 2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è demo –¥–∞–Ω–Ω—ã—Ö
- **–§–∞–π–ª**: `README.md`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ demo –¥–∞–Ω–Ω—ã—Ö —Å embeddings

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ demo –¥–∞–Ω–Ω—ã—Ö —Å embeddings

–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ–º–æ-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤ —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏:

```python
#!/usr/bin/env python3
"""
Generate demo tutors with embeddings for testing AI matching functionality.
"""

import os
import psycopg2
import openai
from dotenv import load_dotenv

def generate_demo_tutors_with_embeddings():
    """Generate demo tutors and their bio embeddings."""
    
    load_dotenv()
    conn = psycopg2.connect(os.getenv("SUPABASE_DB_URL"))
    cur = conn.cursor()
    
    demo_tutors = [
        {
            "name": "–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞",
            "bio": "–û–ø—ã—Ç–Ω—ã–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ —Å 10-–ª–µ—Ç–Ω–∏–º —Å—Ç–∞–∂–µ–º. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ –ï–ì–≠ –ø–æ –∞–ª–≥–µ–±—Ä–µ –∏ –≥–µ–æ–º–µ—Ç—Ä–∏–∏. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞–∂–¥–æ–º—É —É—á–µ–Ω–∏–∫—É.",
            "subjects": ["–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "–∞–ª–≥–µ–±—Ä–∞", "–≥–µ–æ–º–µ—Ç—Ä–∏—è"]
        },
        {
            "name": "–°–µ—Ä–≥–µ–π –ò–≤–∞–Ω–æ–≤", 
            "bio": "–ö–∞–Ω–¥–∏–¥–∞—Ç —Ñ–∏–∑–∏–∫–æ-–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—É–∫. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Ñ–∏–∑–∏–∫–∏ –≤ –ª–∏—Ü–µ–µ. –ü–æ–º–æ–≥–∞–µ—Ç —É—á–µ–Ω–∏–∫–∞–º –ø–æ–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã.",
            "subjects": ["—Ñ–∏–∑–∏–∫–∞", "–º–µ—Ö–∞–Ω–∏–∫–∞", "—Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫–∞"]
        }
    ]
    
    for tutor in demo_tutors:
        # Generate embedding for bio
        response = openai.embeddings.create(
            model="text-embedding-3-small",
            input=tutor["bio"]
        )
        embedding = response.data[0].embedding
        
        # Insert tutor with embedding
        cur.execute("""
            INSERT INTO tutors (name, bio, subjects, bio_embedding) 
            VALUES (%s, %s, %s, %s)
        """, (tutor["name"], tutor["bio"], tutor["subjects"], embedding))
    
    conn.commit()
    conn.close()
    print("Demo tutors with embeddings created successfully!")

if __name__ == "__main__":
    generate_demo_tutors_with_embeddings()
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ embeddings

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–µ–π:

```python
def validate_embeddings_consistency():
    """Validate that all embeddings have correct dimensions."""
    conn = psycopg2.connect(os.getenv("SUPABASE_DB_URL"))
    cur = conn.cursor()
    
    # Check task_chunks embeddings
    cur.execute("SELECT id, array_length(embedding, 1) as dim FROM task_chunks WHERE embedding IS NOT NULL")
    chunks = cur.fetchall()
    
    for chunk_id, dim in chunks:
        if dim != 1536:
            print(f"WARNING: task_chunk {chunk_id} has embedding dimension {dim}, expected 1536")
    
    print("Embeddings validation completed!")
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ AI-—Å–µ—Ä–≤–∏—Å–æ–≤

–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI:

```typescript
// –í edge function chat-task
export const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
}

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI
await supabase.from('ai_usage_logs').insert({
  function_name: 'chat-task',
  task_id,
  tokens_used: response.usage?.total_tokens,
  response_time_ms: Date.now() - startTime,
  user_id: req.headers.get('user-id')
})
```

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã:

- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤ (1536)
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Supabase + Next.js
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ RAG —Å pgvector
- ‚úÖ Edge functions –¥–ª—è AI-—Å–µ—Ä–≤–∏—Å–æ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ demo –¥–∞–Ω–Ω—ã—Ö —Å embeddings –∏ —É–ª—É—á—à–µ–Ω–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ AI-—Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

## üõ†Ô∏è –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è

1. **scripts/generate_demo_tutors.py** - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è demo —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤ —Å embeddings
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã tutors
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings –¥–ª—è –±–∏–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤–µ–∫—Ç–æ—Ä–æ–≤
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π

2. **supabase/edge-functions/match-tutors/** - Edge function –¥–ª—è AI-–ø–æ–¥–±–æ—Ä–∞ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤
   - Semantic similarity search —á–µ—Ä–µ–∑ pgvector
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º
   - Fallback —Ä–µ–∂–∏–º –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
   - CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞

3. **supabase/migrations/20240722_tutor_matching.sql** - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤
   - –¢–∞–±–ª–∏—Ü–∞ tutors —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å—é –≤–µ–∫—Ç–æ—Ä–æ–≤ (1536)
   - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - SQL —Ñ—É–Ω–∫—Ü–∏—è match_tutors()

4. **scripts/cleanup.py** - –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –£–¥–∞–ª–µ–Ω–∏–µ build –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
   - –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π
   - Reset development environment

5. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ README.md
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
   - –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è AI-—Ñ—É–Ω–∫—Ü–∏–π

### üéØ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
npm install
pip install -r scripts/requirements.txt

# 2. –ó–∞–ø—É—Å–∫ Supabase –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
supabase start
supabase db push

# 3. –°–æ–∑–¥–∞–Ω–∏–µ demo –¥–∞–Ω–Ω—ã—Ö
python scripts/generate_demo_tutors.py

# 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI-–ø–æ–¥–±–æ—Ä–∞
curl -X POST http://localhost:54321/functions/v1/match-tutors \
  -H "Content-Type: application/json" \
  -d '{"requirements": "–ù—É–∂–µ–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Ñ–∏–∑–∏–∫–∏ —Å –±–æ–ª—å—à–∏–º –æ–ø—ã—Ç–æ–º"}'

# 5. –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
python scripts/cleanup.py
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤ (1536)
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ AI-–ø–æ–¥–±–æ—Ä–∞ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤  
- ‚úÖ Demo –¥–∞–Ω–Ω—ã–µ —Å embeddings
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!